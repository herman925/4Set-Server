{
  "_comment": "Jotform API configuration for both Python and PowerShell processors",
  
  "python": {
    "maxConcurrent": 1,
    "batchSize": 10,
    "perMinuteQuota": 60,
    "retryScheduleSeconds": [15, 45, 120, 300],
    "burstCooldownSeconds": 60
  },
  
  "webFetch": {
    "_comment": "Settings for browser-based JotForm data fetching (checking system)",
    "initialBatchSize": 100,
    "minBatchSize": 10,
    "maxBatchSize": 500,
    "batchSizeReductions": [1.0, 0.5, 0.3, 0.2, 0.1],
    "consecutiveSuccessesForIncrease": 2,
    "timeoutSeconds": 60,
    "retryDelaySeconds": [2, 5, 10],
    "comment": "Adaptive batch sizing: starts at 100, reduces on errors (504/truncation), increases after 2 consecutive successes"
  },
  
  "powershell": {
    "maxConcurrentPdfs": 2,
    "maxFieldsPerChunk": 100,
    "maxConcurrentChunks": 1,
    "maxRetries": 6,
    "searchTimeoutSec": 180,
    "updateTimeoutSec": 180,
    "createTimeoutSec": 90,
    "rateLimitMs": 500,
    "maxPagesToScan": 20,
    "paginationLimit": 1000,
    "retryDelayBaseSec": 5,
    "retryDelayMaxSec": 60,
    "comment": "CRITICAL FIX (Nov 7, 2025): Replaced ForEach-Object -Parallel with sequential foreach loop. Parallel processing had 40s+ overhead even with ThrottleLimit=1. Sequential processing: ~1.5s per 100-field chunk = ~6s total for 400 fields. Restored to 100 fields per chunk baseline (stress test confirmed 100 fields works in 0.88s). Added 500ms rate limiting between chunks for API courtesy. maxConcurrentPdfs=2 processes multiple PDFs in parallel (file-level, not chunk-level)."
  },
  
  "logging": {
    "_comment": "Log level configuration - set each level to true (log) or false (skip)",
    
    "REJECT": true,
    "_REJECT_comment": "Validation failures: sessionkey mismatch, core ID mismatch, school ID mismatch, filename format errors",
    
    "DATA_OVERWRITE_DIFF": true,
    "_DATA_OVERWRITE_DIFF_comment": "Data overwrite conflicts: fields that would change existing non-empty values (excludes exception fields like student-id, child-name, etc.)",
    
    "UPLOAD": true,
    "_UPLOAD_comment": "Jotform operations: created/updated submissions with field counts and chunk info",
    
    "FILED": true,
    "_FILED_comment": "Successfully archived files with destination folder",
    
    "CLEANUP": true,
    "_CLEANUP_comment": "Maintenance operations: orphaned JSON cleanup, housekeeping tasks",
    
    "RENAME": true,
    "_RENAME_comment": "Filename normalization: shows original â†’ canonical name transformation",
    
    "WARN": true,
    "_WARN_comment": "Non-critical issues: missing mappings, upload failures routed to Unsorted, file stability timeouts",
    
    "ERROR": true,
    "_ERROR_comment": "Critical failures: parser errors, processing exceptions, permanent Jotform failures",
    
    "INFO": true,
    "_INFO_comment": "Verbose details: queued, moved to staging, parsing started/succeeded, validating, enriching, searching Jotform, scanning pages, filtering fields, chunking, processed, etc."
  }
}
