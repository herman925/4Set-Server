<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>_TEXT Field "Not answered" Styling Fix</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #f9fafb;
        }
        h1 {
            color: #111827;
            text-align: center;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .panel h2 {
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }
        .before h2 {
            color: #dc2626;
            border-bottom-color: #fca5a5;
        }
        .after h2 {
            color: #16a34a;
            border-bottom-color: #86efac;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        th {
            background: #f3f4f6;
            font-weight: 600;
            font-size: 0.875rem;
        }
        td:first-child {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .answer-pill {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.875rem;
            border: 1px solid;
            font-weight: 500;
        }
        .incorrect {
            background: #fee2e2;
            color: #991b1b;
            border-color: #fca5a5;
        }
        .warning {
            background: #fef3c7;
            color: #92400e;
            border-color: #fde68a;
        }
        .note {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .note h3 {
            margin-top: 0;
            color: #1e40af;
        }
        .highlight {
            background: #fef9c3;
            padding: 2px 4px;
            border-radius: 4px;
        }
        .issue {
            background: #fee2e2;
            border-left: 4px solid #dc2626;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .issue h3 {
            margin-top: 0;
            color: #991b1b;
        }
        .fix {
            background: #dcfce7;
            border-left: 4px solid #16a34a;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .fix h3 {
            margin-top: 0;
            color: #166534;
        }
    </style>
</head>
<body>
    <h1>Fix: _TEXT Field "Not answered" Styling</h1>
    
    <div class="issue">
        <h3>❌ Issue Identified</h3>
        <p><strong>Problem:</strong> _TEXT fields were using red "incorrect" styling for "Not answered" status, which is misleading because:</p>
        <ul>
            <li>_TEXT fields don't have correct/incorrect answers - they're just text input fields</li>
            <li>Red styling makes it seem like the student got something wrong</li>
            <li>This doesn't match the PRDs' intent that _TEXT fields are display-only</li>
        </ul>
    </div>

    <div class="comparison">
        <div class="panel before">
            <h2>❌ Before Fix</h2>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Student Answer</th>
                        <th>Correct Answer</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ToM_Q3a</td>
                        <td>其他</td>
                        <td>狗仔</td>
                        <td><span class="answer-pill incorrect">✗ Incorrect</span></td>
                    </tr>
                    <tr style="background: #fef9c3;">
                        <td>ToM_Q3a_TEXT</td>
                        <td>—</td>
                        <td>—</td>
                        <td><span class="answer-pill incorrect">− Not answered</span></td>
                    </tr>
                </tbody>
            </table>
            <div class="note">
                <h3>❌ Problem</h3>
                <ul style="margin: 10px 0 0 0;">
                    <li><strong>Misleading:</strong> Red "incorrect" styling suggests wrong answer</li>
                    <li><strong>Inconsistent:</strong> _TEXT fields don't have right/wrong answers</li>
                    <li><strong>Violates PRDs:</strong> _TEXT fields should be display-only</li>
                </ul>
            </div>
        </div>

        <div class="panel after">
            <h2>✅ After Fix</h2>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Student Answer</th>
                        <th>Correct Answer</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ToM_Q3a</td>
                        <td>其他</td>
                        <td>狗仔</td>
                        <td><span class="answer-pill incorrect">✗ Incorrect</span></td>
                    </tr>
                    <tr style="background: #d1fae5;">
                        <td>ToM_Q3a_TEXT</td>
                        <td>—</td>
                        <td>—</td>
                        <td><span class="answer-pill warning">⚠ Not answered</span></td>
                    </tr>
                </tbody>
            </table>
            <div class="note">
                <h3>✅ Improvements</h3>
                <ul style="margin: 10px 0 0 0;">
                    <li><strong>Neutral styling:</strong> Amber warning color instead of red error</li>
                    <li><strong>Appropriate icon:</strong> Alert circle (⚠) instead of X (✗)</li>
                    <li><strong>Matches intent:</strong> Indicates missing data, not wrong answer</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="fix">
        <h3>✅ Solution Implemented</h3>
        <p><strong>Changed:</strong> "Not answered" status for _TEXT fields now uses amber/warning styling instead of red/incorrect styling</p>
        <p><strong>Why:</strong> _TEXT fields are display-only and don't have correct/incorrect answers. The "Not answered" status simply indicates missing text data, not a wrong answer.</p>
        <p><strong>File:</strong> <code>assets/js/checking-system-student-page.js</code></p>
        <p><strong>Change:</strong></p>
        <pre style="background: #f3f4f6; padding: 10px; border-radius: 4px; overflow-x: auto;">
// OLD (incorrect styling)
statusPill = '&lt;span class="answer-pill incorrect"&gt;Not answered&lt;/span&gt;';

// NEW (neutral warning styling)
statusPill = '&lt;span class="answer-pill" style="background: #fef3c7; color: #92400e; border-color: #fde68a;"&gt;
              &lt;i data-lucide="alert-circle"&gt;&lt;/i&gt;Not answered&lt;/span&gt;';</pre>
    </div>

    <div style="background: white; padding: 20px; border-radius: 8px; margin-top: 20px;">
        <h2>All _TEXT Field Statuses</h2>
        <table>
            <thead>
                <tr>
                    <th>Status</th>
                    <th>Appearance</th>
                    <th>When Shown</th>
                    <th>Styling Type</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>N/A</td>
                    <td><span class="answer-pill" style="background: #f9fafb; color: #6b7280; border-color: #e5e7eb;">ℹ N/A</span></td>
                    <td>Radio answer is correct</td>
                    <td>Muted gray (info)</td>
                </tr>
                <tr>
                    <td>Answered</td>
                    <td><span class="answer-pill" style="background: #f0f9ff; color: #0369a1; border-color: #bae6fd;">✓ Answered</span></td>
                    <td>Text content exists</td>
                    <td>Blue (success)</td>
                </tr>
                <tr style="background: #fef9c3;">
                    <td>Not answered</td>
                    <td><span class="answer-pill warning">⚠ Not answered</span></td>
                    <td>Radio incorrect, no text</td>
                    <td>Amber (warning) ← Changed!</td>
                </tr>
                <tr>
                    <td>—</td>
                    <td><span class="answer-pill" style="background: #f3f4f6; color: #9ca3af; border-color: #d1d5db;">— —</span></td>
                    <td>Radio not answered</td>
                    <td>Light gray (neutral)</td>
                </tr>
            </tbody>
        </table>
        <p style="margin-top: 15px; color: #6b7280; font-size: 0.875rem;">
            <strong>Note:</strong> _TEXT fields are display-only and NEVER counted in completion percentage calculations.
        </p>
    </div>
</body>
</html>
